var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let l,i;function c(t,e){return l||(l=document.createElement("a")),l.href=e,t===l.href}function a(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function m(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function p(){return d(" ")}function g(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function h(t){return function(e){return e.preventDefault(),t.call(this,e)}}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t){i=t}function b(t){(function(){if(!i)throw new Error("Function called outside component initialization");return i})().$$.on_mount.push(t)}const _=[],x=[],w=[],k=[],I=Promise.resolve();let S=!1;function M(t){w.push(t)}const j=new Set;let C=0;function E(){const t=i;do{for(;C<_.length;){const t=_[C];C++,v(t),A(t.$$)}for(v(null),_.length=0,C=0;x.length;)x.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];j.has(e)||(j.add(e),e())}w.length=0}while(_.length);for(;k.length;)k.pop()();S=!1,j.clear(),v(t)}function A(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const B=new Set;let L;function R(){L={r:0,c:[],p:L}}function T(){L.r||r(L.c),L=L.p}function N(t,e){t&&t.i&&(B.delete(t),t.i(e))}function z(t,e,n,r){if(t&&t.o){if(B.has(t))return;B.add(t),L.c.push((()=>{B.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function U(t){t&&t.c()}function D(t,n,s,l){const{fragment:i,on_mount:c,on_destroy:a,after_update:u}=t.$$;i&&i.m(n,s),l||M((()=>{const n=c.map(e).filter(o);a?a.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(M)}function H(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function W(t,e){-1===t.$$.dirty[0]&&(_.push(t),S||(S=!0,I.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function q(e,o,s,l,c,a,u,m=[-1]){const d=i;v(e);const p=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:m,skip_bound:!1,root:o.target||d.$$.root};u&&u(p.root);let g=!1;if(p.ctx=s?s(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),g&&W(e,t)),n})):[],p.update(),g=!0,r(p.before_update),p.fragment=!!l&&l(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(f)}else p.fragment&&p.fragment.c();o.intro&&N(e.$$.fragment),D(e,o.target,o.anchor,o.customElement),E()}v(d)}class G{$destroy(){H(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function O(e){let n,r,o,s,l,i,c,g,h,v,b,_,x,w,k,I;return{c(){n=m("div"),r=m("p"),o=d(e[4]),s=d(", "),l=d(e[3]),i=p(),c=d(e[5]),g=p(),h=d(e[6]),v=p(),b=m("p"),_=d(e[2]),x=d(":"),w=d(e[1]),k=d(":"),I=d(e[0]),$(r,"class","date svelte-ua3iji"),$(b,"class","time svelte-ua3iji"),$(n,"class","clock svelte-ua3iji")},m(t,e){u(t,n,e),a(n,r),a(r,o),a(r,s),a(r,l),a(r,i),a(r,c),a(r,g),a(r,h),a(n,v),a(n,b),a(b,_),a(b,x),a(b,w),a(b,k),a(b,I)},p(t,[e]){16&e&&y(o,t[4]),8&e&&y(l,t[3]),32&e&&y(c,t[5]),64&e&&y(h,t[6]),4&e&&y(_,t[2]),2&e&&y(w,t[1]),1&e&&y(I,t[0])},i:t,o:t,d(t){t&&f(n)}}}function F(t,e,n){let r,o,s,l,i,c,a,u=new Date;return setInterval((()=>{n(7,u=new Date)}),1e3),t.$$.update=()=>{128&t.$$.dirty&&n(6,r=u.getFullYear()),128&t.$$.dirty&&n(5,o={1:"jan",2:"feb",3:"mar",4:"apr",5:"may",6:"jun",7:"jul",8:"aug",9:"sep",10:"oct",11:"nov",12:"dec"}[u.getMonth()+1]),128&t.$$.dirty&&n(4,s={0:"sun",1:"mon",2:"tue",3:"wed",4:"thu",5:"fri",6:"sat"}[u.getDay()]),128&t.$$.dirty&&n(3,l=u.getDate()),128&t.$$.dirty&&n(2,i=("0"+u.getHours()).slice(-2)),128&t.$$.dirty&&n(1,c=("0"+u.getMinutes()).slice(-2)),128&t.$$.dirty&&n(0,a=("0"+u.getSeconds()).slice(-2))},[a,c,i,l,s,o,r,u]}class P extends G{constructor(t){super(),q(this,t,F,O,s,{})}}const Y=[];function J(e,n=t){let r;const o=new Set;function l(t){if(s(e,t)&&(e=t,r)){const t=!Y.length;for(const t of o)t[1](),Y.push(t,e);if(t){for(let t=0;t<Y.length;t+=2)Y[t][0](Y[t+1]);Y.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(s,i=t){const c=[s,i];return o.add(c),1===o.size&&(r=n(l)||t),s(e),()=>{o.delete(c),0===o.size&&(r(),r=null)}}}}const K=J(!1),Q=J(""),V=J(!1);function X(e){let n,r,o,s;return{c(){n=m("div"),r=m("span"),r.textContent="log in",$(r,"class","svelte-1ggbh6i"),$(n,"class","login svelte-1ggbh6i")},m(t,l){u(t,n,l),a(n,r),o||(s=g(r,"click",h(e[0])),o=!0)},p:t,i:t,o:t,d(t){t&&f(n),o=!1,s()}}}function Z(t){var e=location.protocol+"//"+location.host+location.pathname,n=function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*r));return e}(16);let r="https://accounts.spotify.com/authorize";return r+="?response_type=token",r+="&client_id="+encodeURIComponent("ad006f6397254bbd9dbe5e6bfbb35407"),r+="&scope="+encodeURIComponent("user-read-currently-playing"),r+="&redirect_uri="+encodeURIComponent(e),r+="&state="+encodeURIComponent(n),[function(){localStorage.setItem("shouldBeLogged",!0),location.href=r}]}class tt extends G{constructor(t){super(),q(this,t,Z,X,s,{})}}function et(e){let n,r;return{c(){n=m("div"),r=m("div"),$(r,"class","point svelte-pqh029"),$(n,"class","progress svelte-pqh029")},m(t,o){u(t,n,o),a(n,r),e[4](r),e[5](n)},p:t,i:t,o:t,d(t){t&&f(n),e[4](null),e[5](null)}}}function nt(t,e,n){let r,o,{duration:s}=e,{current:l}=e;return setInterval((()=>{const t=100*l/s,e=r.clientWidth*t/100;e<r.clientWidth&&n(1,o.style.width=`${e}px`,o)}),1e3),t.$$set=t=>{"duration"in t&&n(2,s=t.duration),"current"in t&&n(3,l=t.current)},[r,o,s,l,function(t){x[t?"unshift":"push"]((()=>{o=t,n(1,o)}))},function(t){x[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}class rt extends G{constructor(t){super(),q(this,t,nt,et,s,{duration:2,current:3})}}function ot(t){let e;function n(t,e){return t[0]?lt:st}let r=n(t),o=r(t);return{c(){e=m("div"),o.c(),$(e,"class","lyrics svelte-1ne9p07")},m(t,n){u(t,e,n),o.m(e,null)},p(t,s){r===(r=n(t))&&o?o.p(t,s):(o.d(1),o=r(t),o&&(o.c(),o.m(e,null)))},d(t){t&&f(e),o.d()}}}function st(e){let n;return{c(){n=m("div"),$(n,"class","loading svelte-1ne9p07")},m(t,e){u(t,n,e)},p:t,d(t){t&&f(n)}}}function lt(t){let e;return{c(){e=m("p"),$(e,"class","svelte-1ne9p07")},m(n,r){u(n,e,r),e.innerHTML=t[0]},p(t,n){1&n&&(e.innerHTML=t[0])},d(t){t&&f(e)}}}function it(e){let n,r=e[1]&&ot(e);return{c(){r&&r.c(),n=d("")},m(t,e){r&&r.m(t,e),u(t,n,e)},p(t,[e]){t[1]?r?r.p(t,e):(r=ot(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&f(n)}}}function ct(t,e,n){let r,o;return Q.subscribe((async t=>{const e=encodeURI("https://some-random-api.ml/lyrics?title="+t),o=await fetch(e),s=await o.json();s.error?n(0,r="No lyrics found"):n(0,r=s.lyrics.replace(/\n/g,"<br>"))})),V.subscribe((t=>{n(1,o=t)})),[r,o]}class at extends G{constructor(t){super(),q(this,t,ct,it,s,{})}}function ut(t,e,n){const r=t.slice();return r[7]=e[n],r}function ft(e){let n;return{c(){n=d("loading...")},m(t,e){u(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}function mt(t){let e,n,r,o,s,l,i,v,b,_,x,w,k,I,S,M,j,C,E,A,B,L,R,T,W,q,G,O,F,P,Y,J,K,Q,V,X=t[0].item.name+"",Z=t[0].item.album.name+"",tt=Math.floor(t[1]/1e3/60)+"",et=("0"+Math.floor(t[1]/1e3%60)).slice(-2)+"",nt=Math.floor(t[0].item.duration_ms/1e3/60)+"",ot=("0"+Math.floor(t[0].item.duration_ms/1e3%60)).slice(-2)+"",st=t[0].item.artists,lt=[];for(let e=0;e<st.length;e+=1)lt[e]=dt(ut(t,st,e));function it(t,e){return t[0].fake?gt:pt}q=new rt({props:{duration:t[0].item.duration_ms,current:t[1]}}),F=new at({});let ct=it(t),ft=ct(t);return{c(){e=m("div"),n=m("img"),o=p(),s=m("p"),l=m("a"),i=d(X),b=p(),_=m("p"),x=m("a"),w=d(Z),I=p(),S=m("p");for(let t=0;t<lt.length;t+=1)lt[t].c();M=p(),j=m("p"),C=d(tt),E=d(":"),A=d(et),B=d(" / "),L=d(nt),R=d(":"),T=d(ot),W=p(),U(q.$$.fragment),G=p(),O=m("div"),U(F.$$.fragment),P=p(),ft.c(),Y=p(),J=m("button"),J.textContent="Show lyrics",c(n.src,r="./Spotify_Icon_RGB_White.png")||$(n,"src","./Spotify_Icon_RGB_White.png"),$(n,"alt","Spotify Icon"),$(n,"class","spotify-icon svelte-1i1n1l0"),$(l,"href",v=t[0].item.external_urls.spotify),$(l,"target","_blank"),$(l,"class","svelte-1i1n1l0"),$(s,"class","title svelte-1i1n1l0"),$(x,"href",k=t[0].item.album.external_urls.spotify),$(x,"target","_blank"),$(x,"class","svelte-1i1n1l0"),$(_,"class","album svelte-1i1n1l0"),$(S,"class","artists svelte-1i1n1l0"),$(j,"class","time svelte-1i1n1l0"),$(e,"class","content svelte-1i1n1l0"),$(J,"class","svelte-1i1n1l0"),$(O,"class","cover svelte-1i1n1l0")},m(r,c){u(r,e,c),a(e,n),a(e,o),a(e,s),a(s,l),a(l,i),a(e,b),a(e,_),a(_,x),a(x,w),a(e,I),a(e,S);for(let t=0;t<lt.length;t+=1)lt[t].m(S,null);a(e,M),a(e,j),a(j,C),a(j,E),a(j,A),a(j,B),a(j,L),a(j,R),a(j,T),a(e,W),D(q,e,null),u(r,G,c),u(r,O,c),D(F,O,null),a(O,P),ft.m(O,null),a(O,Y),a(O,J),K=!0,Q||(V=g(J,"click",h(t[2])),Q=!0)},p(t,e){if((!K||1&e)&&X!==(X=t[0].item.name+"")&&y(i,X),(!K||1&e&&v!==(v=t[0].item.external_urls.spotify))&&$(l,"href",v),(!K||1&e)&&Z!==(Z=t[0].item.album.name+"")&&y(w,Z),(!K||1&e&&k!==(k=t[0].item.album.external_urls.spotify))&&$(x,"href",k),1&e){let n;for(st=t[0].item.artists,n=0;n<st.length;n+=1){const r=ut(t,st,n);lt[n]?lt[n].p(r,e):(lt[n]=dt(r),lt[n].c(),lt[n].m(S,null))}for(;n<lt.length;n+=1)lt[n].d(1);lt.length=st.length}(!K||2&e)&&tt!==(tt=Math.floor(t[1]/1e3/60)+"")&&y(C,tt),(!K||2&e)&&et!==(et=("0"+Math.floor(t[1]/1e3%60)).slice(-2)+"")&&y(A,et),(!K||1&e)&&nt!==(nt=Math.floor(t[0].item.duration_ms/1e3/60)+"")&&y(L,nt),(!K||1&e)&&ot!==(ot=("0"+Math.floor(t[0].item.duration_ms/1e3%60)).slice(-2)+"")&&y(T,ot);const n={};1&e&&(n.duration=t[0].item.duration_ms),2&e&&(n.current=t[1]),q.$set(n),ct===(ct=it(t))&&ft?ft.p(t,e):(ft.d(1),ft=ct(t),ft&&(ft.c(),ft.m(O,Y)))},i(t){K||(N(q.$$.fragment,t),N(F.$$.fragment,t),K=!0)},o(t){z(q.$$.fragment,t),z(F.$$.fragment,t),K=!1},d(t){t&&f(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(lt,t),H(q),t&&f(G),t&&f(O),H(F),ft.d(),Q=!1,V()}}}function dt(t){let e,n,r,o,s=t[7].name+"";return{c(){e=m("a"),n=d(s),r=p(),$(e,"href",o=t[7].external_urls.spotify),$(e,"target","_blank"),$(e,"class","artist svelte-1i1n1l0")},m(t,o){u(t,e,o),a(e,n),a(e,r)},p(t,r){1&r&&s!==(s=t[7].name+"")&&y(n,s),1&r&&o!==(o=t[7].external_urls.spotify)&&$(e,"href",o)},d(t){t&&f(e)}}}function pt(t){let e,n,r,o;return{c(){e=m("a"),n=m("img"),c(n.src,r=t[0].item.album.images[1].url)||$(n,"src",r),$(n,"alt","Album Cover"),$(n,"class","svelte-1i1n1l0"),$(e,"href",o=t[0].item.external_urls.spotify),$(e,"target","_blank"),$(e,"class","svelte-1i1n1l0")},m(t,r){u(t,e,r),a(e,n)},p(t,s){1&s&&!c(n.src,r=t[0].item.album.images[1].url)&&$(n,"src",r),1&s&&o!==(o=t[0].item.external_urls.spotify)&&$(e,"href",o)},d(t){t&&f(e)}}}function gt(t){let e,n;return{c(){e=m("img"),c(e.src,n=t[0].item.album.images[1].url)||$(e,"src",n),$(e,"alt","Album Cover"),$(e,"class","fake svelte-1i1n1l0")},m(t,n){u(t,e,n)},p(t,r){1&r&&!c(e.src,n=t[0].item.album.images[1].url)&&$(e,"src",n)},d(t){t&&f(e)}}}function ht(t){let e,n,r,o;const s=[mt,ft],l=[];function i(t,e){return t[0]?0:1}return n=i(t),r=l[n]=s[n](t),{c(){e=m("div"),r.c(),$(e,"class","player svelte-1i1n1l0")},m(t,r){u(t,e,r),l[n].m(e,null),o=!0},p(t,[o]){let c=n;n=i(t),n===c?l[n].p(t,o):(R(),z(l[c],1,1,(()=>{l[c]=null})),T(),r=l[n],r?r.p(t,o):(r=l[n]=s[n](t),r.c()),N(r,1),r.m(e,null))},i(t){o||(N(r),o=!0)},o(t){z(r),o=!1},d(t){t&&f(e),l[n].d()}}}function $t(t,e,n){const r=localStorage.getItem("token");let o,s=0;b(i),setInterval((()=>{i()}),1e3);const l={fake:!0,progress_ms:0,item:{duration_ms:0,id:42,name:"No song playing",external_urls:{spotify:""},album:{name:"No album playing",external_urls:{spotify:""},images:[{},{url:"./Spotify_Icon_RGB_White.png"}]},artists:[{name:"No artist playing",external_urls:{spotify:""}}]}};async function i(){var t=await fetch("https://api.spotify.com/v1/me/player/currently-playing",{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(200!==t.status&&204!==t.status)K.set(!1),n(0,o=l);else{let e;e=204===t.status?l:await t.json(),e.item?(o?o.item.id!==e.item.id&&(n(0,o=e),Q.update((t=>o.item.name+" "+o.item.artists[0].name))):(n(0,o=e),Q.update((t=>o.item.name+" "+o.item.artists[0].name))),n(1,s=e.progress_ms)):n(0,o=l)}}let c=!1;return V.subscribe((t=>{c=t})),[o,s,function(t){c?(V.set(!1),t.target.innerText="Show lyrics"):(V.set(!0),t.target.innerText="Hide lyrics")}]}class yt extends G{constructor(t){super(),q(this,t,$t,ht,s,{})}}function vt(t){let e,n;return e=new yt({}),{c(){U(e.$$.fragment)},m(t,r){D(e,t,r),n=!0},i(t){n||(N(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function bt(t){let e,n;return e=new tt({}),{c(){U(e.$$.fragment)},m(t,r){D(e,t,r),n=!0},i(t){n||(N(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function _t(t){let e,n,r,o;const s=[bt,vt],l=[];function i(t,e){return t[0]?1:0}return n=i(t),r=l[n]=s[n](t),{c(){e=m("div"),r.c(),$(e,"class","spotify")},m(t,r){u(t,e,r),l[n].m(e,null),o=!0},p(t,[o]){let c=n;n=i(t),n!==c&&(R(),z(l[c],1,1,(()=>{l[c]=null})),T(),r=l[n],r||(r=l[n]=s[n](t),r.c()),N(r,1),r.m(e,null))},i(t){o||(N(r),o=!0)},o(t){z(r),o=!1},d(t){t&&f(e),l[n].d()}}}function xt(t,e,n){var r=new URLSearchParams(window.location.hash.replace("#","?")).get("access_token");r&&(localStorage.setItem("token",r),location.href=location.protocol+"//"+location.host+location.pathname);let o=!1;return K.subscribe((t=>{n(0,o=t)})),b((async()=>{if(localStorage.getItem("token")){200===(await fetch("https://api.spotify.com/v1/me",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).status?K.set(!0):(K.set(!1),"true"===localStorage.getItem("shouldBeLogged")&&alert("couldn't log you in, make sure you're in whitelist (app not released yet)"),localStorage.removeItem("token"))}localStorage.setItem("shouldBeLogged",!1)})),[o]}class wt extends G{constructor(t){super(),q(this,t,xt,_t,s,{})}}function kt(e){let n;return{c(){n=m("div"),n.innerHTML='<img src="./sun.svg" alt="sun" class="sun svelte-9x9wy8"/> \n    <img class="sand svelte-9x9wy8" src="./sand.svg" alt="sand"/>',$(n,"class","background svelte-9x9wy8")},m(t,e){u(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}class It extends G{constructor(t){super(),q(this,t,null,kt,s,{})}}function St(e){let n,r,o,s,l,i,c,d,g,h;return r=new It({}),i=new P({}),g=new wt({}),{c(){n=m("main"),U(r.$$.fragment),o=p(),s=m("div"),l=m("div"),U(i.$$.fragment),c=p(),d=m("div"),U(g.$$.fragment),$(l,"class","clock svelte-8rces5"),$(d,"class","spotify svelte-8rces5"),$(s,"class","container svelte-8rces5"),$(n,"class","svelte-8rces5")},m(t,e){u(t,n,e),D(r,n,null),a(n,o),a(n,s),a(s,l),D(i,l,null),a(s,c),a(s,d),D(g,d,null),h=!0},p:t,i(t){h||(N(r.$$.fragment,t),N(i.$$.fragment,t),N(g.$$.fragment,t),h=!0)},o(t){z(r.$$.fragment,t),z(i.$$.fragment,t),z(g.$$.fragment,t),h=!1},d(t){t&&f(n),H(r),H(i),H(g)}}}return new class extends G{constructor(t){super(),q(this,t,null,St,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
