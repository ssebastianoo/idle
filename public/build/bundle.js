var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let l,a;function i(t,e){return l||(l=document.createElement("a")),l.href=e,t===l.href}function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function m(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function d(){return p(" ")}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t){a=t}function y(t){(function(){if(!a)throw new Error("Function called outside component initialization");return a})().$$.on_mount.push(t)}const v=[],_=[],b=[],x=[],w=Promise.resolve();let k=!1;function j(t){b.push(t)}const I=new Set;let S=0;function M(){const t=a;do{for(;S<v.length;){const t=v[S];S++,$(t),C(t.$$)}for($(null),v.length=0,S=0;_.length;)_.pop()();for(let t=0;t<b.length;t+=1){const e=b[t];I.has(e)||(I.add(e),e())}b.length=0}while(v.length);for(;x.length;)x.pop()();k=!1,I.clear(),$(t)}function C(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const E=new Set;let A;function B(){A={r:0,c:[],p:A}}function R(){A.r||o(A.c),A=A.p}function L(t,e){t&&t.i&&(E.delete(t),t.i(e))}function z(t,e,n,o){if(t&&t.o){if(E.has(t))return;E.add(t),A.c.push((()=>{E.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function N(t){t&&t.c()}function D(t,n,s,l){const{fragment:a,on_mount:i,on_destroy:c,after_update:u}=t.$$;a&&a.m(n,s),l||j((()=>{const n=i.map(e).filter(r);c?c.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(j)}function T(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function U(t,e){-1===t.$$.dirty[0]&&(v.push(t),k||(k=!0,w.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,r,s,l,i,c,u,m=[-1]){const p=a;$(e);const d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(p?p.$$.context:[])),callbacks:n(),dirty:m,skip_bound:!1,root:r.target||p.$$.root};u&&u(d.root);let g=!1;if(d.ctx=s?s(e,r.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return d.ctx&&i(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),g&&U(e,t)),n})):[],d.update(),g=!0,o(d.before_update),d.fragment=!!l&&l(d.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);d.fragment&&d.fragment.l(t),t.forEach(f)}else d.fragment&&d.fragment.c();r.intro&&L(e.$$.fragment),D(e,r.target,r.anchor,r.customElement),M()}$(p)}class q{$destroy(){T(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function G(e){let n,o,r,s,l,a,i,$,y,v,_,b,x,w,k,j;return{c(){n=m("div"),o=m("p"),r=p(e[4]),s=p(", "),l=p(e[3]),a=d(),i=p(e[5]),$=d(),y=p(e[6]),v=d(),_=m("p"),b=p(e[2]),x=p(":"),w=p(e[1]),k=p(":"),j=p(e[0]),g(o,"class","date svelte-ua3iji"),g(_,"class","time svelte-ua3iji"),g(n,"class","clock svelte-ua3iji")},m(t,e){u(t,n,e),c(n,o),c(o,r),c(o,s),c(o,l),c(o,a),c(o,i),c(o,$),c(o,y),c(n,v),c(n,_),c(_,b),c(_,x),c(_,w),c(_,k),c(_,j)},p(t,[e]){16&e&&h(r,t[4]),8&e&&h(l,t[3]),32&e&&h(i,t[5]),64&e&&h(y,t[6]),4&e&&h(b,t[2]),2&e&&h(w,t[1]),1&e&&h(j,t[0])},i:t,o:t,d(t){t&&f(n)}}}function O(t,e,n){let o,r,s,l,a,i,c,u=new Date;return setInterval((()=>{n(7,u=new Date)}),1e3),t.$$.update=()=>{128&t.$$.dirty&&n(6,o=u.getFullYear()),128&t.$$.dirty&&n(5,r={1:"jan",2:"feb",3:"mar",4:"apr",5:"may",6:"jun",7:"jul",8:"aug",9:"sep",10:"oct",11:"nov",12:"dec"}[u.getMonth()+1]),128&t.$$.dirty&&n(4,s={0:"sun",1:"mon",2:"tue",3:"wed",4:"thu",5:"fri",6:"sat"}[u.getDay()]),128&t.$$.dirty&&n(3,l=u.getDate()),128&t.$$.dirty&&n(2,a=("0"+u.getHours()).slice(-2)),128&t.$$.dirty&&n(1,i=("0"+u.getMinutes()).slice(-2)),128&t.$$.dirty&&n(0,c=("0"+u.getSeconds()).slice(-2))},[c,i,a,l,s,r,o,u]}class F extends q{constructor(t){super(),W(this,t,O,G,s,{})}}const H=[];const P=function(e,n=t){let o;const r=new Set;function l(t){if(s(e,t)&&(e=t,o)){const t=!H.length;for(const t of r)t[1](),H.push(t,e);if(t){for(let t=0;t<H.length;t+=2)H[t][0](H[t+1]);H.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(s,a=t){const i=[s,a];return r.add(i),1===r.size&&(o=n(l)||t),s(e),()=>{r.delete(i),0===r.size&&(o(),o=null)}}}}(!1);function Y(e){let n,o,r,s;return{c(){n=m("div"),o=m("span"),o.textContent="log in",g(o,"class","svelte-1ggbh6i"),g(n,"class","login svelte-1ggbh6i")},m(t,l){var a,i,f,m,p;u(t,n,l),c(n,o),r||(a=o,i="click",p=e[0],f=function(t){return t.preventDefault(),p.call(this,t)},a.addEventListener(i,f,m),s=()=>a.removeEventListener(i,f,m),r=!0)},p:t,i:t,o:t,d(t){t&&f(n),r=!1,s()}}}function J(t){var e=location.protocol+"//"+location.host+location.pathname,n=function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,r=0;r<t;r++)e+=n.charAt(Math.floor(Math.random()*o));return e}(16);let o="https://accounts.spotify.com/authorize";return o+="?response_type=token",o+="&client_id="+encodeURIComponent("ad006f6397254bbd9dbe5e6bfbb35407"),o+="&scope="+encodeURIComponent("user-read-currently-playing"),o+="&redirect_uri="+encodeURIComponent(e),o+="&state="+encodeURIComponent(n),[function(){localStorage.setItem("shouldBeLogged",!0),location.href=o}]}class K extends q{constructor(t){super(),W(this,t,J,Y,s,{})}}function Q(e){let n,o;return{c(){n=m("div"),o=m("div"),g(o,"class","point svelte-pqh029"),g(n,"class","progress svelte-pqh029")},m(t,r){u(t,n,r),c(n,o),e[4](o),e[5](n)},p:t,i:t,o:t,d(t){t&&f(n),e[4](null),e[5](null)}}}function V(t,e,n){let o,r,{duration:s}=e,{current:l}=e;return setInterval((()=>{const t=100*l/s,e=o.clientWidth*t/100;e<o.clientWidth&&n(1,r.style.width=`${e}px`,r)}),1e3),t.$$set=t=>{"duration"in t&&n(2,s=t.duration),"current"in t&&n(3,l=t.current)},[o,r,s,l,function(t){_[t?"unshift":"push"]((()=>{r=t,n(1,r)}))},function(t){_[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class X extends q{constructor(t){super(),W(this,t,V,Q,s,{duration:2,current:3})}}function Z(t,e,n){const o=t.slice();return o[5]=e[n],o}function tt(e){let n;return{c(){n=p("loading...")},m(t,e){u(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}function et(t){let e,n,o,r,s,l,a,$,y,v,_,b,x,w,k,j,I,S,M,C,E,A,B,R,U,W,q,G,O,F=t[0].item.name+"",H=t[0].item.album.name+"",P=Math.floor(t[1]/1e3/60)+"",Y=("0"+Math.floor(t[1]/1e3%60)).slice(-2)+"",J=Math.floor(t[0].item.duration_ms/1e3/60)+"",K=("0"+Math.floor(t[0].item.duration_ms/1e3%60)).slice(-2)+"",Q=t[0].item.artists,V=[];for(let e=0;e<Q.length;e+=1)V[e]=nt(Z(t,Q,e));function tt(t,e){return t[0].fake?rt:ot}W=new X({props:{duration:t[0].item.duration_ms,current:t[1]}});let et=tt(t),st=et(t);return{c(){e=m("div"),n=m("img"),r=d(),s=m("p"),l=m("a"),a=p(F),y=d(),v=m("p"),_=m("a"),b=p(H),w=d(),k=m("p");for(let t=0;t<V.length;t+=1)V[t].c();j=d(),I=m("p"),S=p(P),M=p(":"),C=p(Y),E=p(" / "),A=p(J),B=p(":"),R=p(K),U=d(),N(W.$$.fragment),q=d(),G=m("div"),st.c(),i(n.src,o="./Spotify_Icon_RGB_White.png")||g(n,"src","./Spotify_Icon_RGB_White.png"),g(n,"alt","Spotify Icon"),g(n,"class","spotify-icon svelte-1lj5pay"),g(l,"href",$=t[0].item.external_urls.spotify),g(l,"target","_blank"),g(l,"class","svelte-1lj5pay"),g(s,"class","title svelte-1lj5pay"),g(_,"href",x=t[0].item.album.external_urls.spotify),g(_,"target","_blank"),g(_,"class","svelte-1lj5pay"),g(v,"class","album svelte-1lj5pay"),g(k,"class","artists svelte-1lj5pay"),g(I,"class","time svelte-1lj5pay"),g(e,"class","content svelte-1lj5pay"),g(G,"class","cover svelte-1lj5pay")},m(t,o){u(t,e,o),c(e,n),c(e,r),c(e,s),c(s,l),c(l,a),c(e,y),c(e,v),c(v,_),c(_,b),c(e,w),c(e,k);for(let t=0;t<V.length;t+=1)V[t].m(k,null);c(e,j),c(e,I),c(I,S),c(I,M),c(I,C),c(I,E),c(I,A),c(I,B),c(I,R),c(e,U),D(W,e,null),u(t,q,o),u(t,G,o),st.m(G,null),O=!0},p(t,e){if((!O||1&e)&&F!==(F=t[0].item.name+"")&&h(a,F),(!O||1&e&&$!==($=t[0].item.external_urls.spotify))&&g(l,"href",$),(!O||1&e)&&H!==(H=t[0].item.album.name+"")&&h(b,H),(!O||1&e&&x!==(x=t[0].item.album.external_urls.spotify))&&g(_,"href",x),1&e){let n;for(Q=t[0].item.artists,n=0;n<Q.length;n+=1){const o=Z(t,Q,n);V[n]?V[n].p(o,e):(V[n]=nt(o),V[n].c(),V[n].m(k,null))}for(;n<V.length;n+=1)V[n].d(1);V.length=Q.length}(!O||2&e)&&P!==(P=Math.floor(t[1]/1e3/60)+"")&&h(S,P),(!O||2&e)&&Y!==(Y=("0"+Math.floor(t[1]/1e3%60)).slice(-2)+"")&&h(C,Y),(!O||1&e)&&J!==(J=Math.floor(t[0].item.duration_ms/1e3/60)+"")&&h(A,J),(!O||1&e)&&K!==(K=("0"+Math.floor(t[0].item.duration_ms/1e3%60)).slice(-2)+"")&&h(R,K);const n={};1&e&&(n.duration=t[0].item.duration_ms),2&e&&(n.current=t[1]),W.$set(n),et===(et=tt(t))&&st?st.p(t,e):(st.d(1),st=et(t),st&&(st.c(),st.m(G,null)))},i(t){O||(L(W.$$.fragment,t),O=!0)},o(t){z(W.$$.fragment,t),O=!1},d(t){t&&f(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(V,t),T(W),t&&f(q),t&&f(G),st.d()}}}function nt(t){let e,n,o,r,s=t[5].name+"";return{c(){e=m("a"),n=p(s),o=d(),g(e,"href",r=t[5].external_urls.spotify),g(e,"target","_blank"),g(e,"class","artist svelte-1lj5pay")},m(t,r){u(t,e,r),c(e,n),c(e,o)},p(t,o){1&o&&s!==(s=t[5].name+"")&&h(n,s),1&o&&r!==(r=t[5].external_urls.spotify)&&g(e,"href",r)},d(t){t&&f(e)}}}function ot(t){let e,n,o,r;return{c(){e=m("a"),n=m("img"),i(n.src,o=t[0].item.album.images[1].url)||g(n,"src",o),g(n,"alt","Album Cover"),g(n,"class","svelte-1lj5pay"),g(e,"href",r=t[0].item.external_urls.spotify),g(e,"target","_blank"),g(e,"class","svelte-1lj5pay")},m(t,o){u(t,e,o),c(e,n)},p(t,s){1&s&&!i(n.src,o=t[0].item.album.images[1].url)&&g(n,"src",o),1&s&&r!==(r=t[0].item.external_urls.spotify)&&g(e,"href",r)},d(t){t&&f(e)}}}function rt(t){let e,n;return{c(){e=m("img"),i(e.src,n=t[0].item.album.images[1].url)||g(e,"src",n),g(e,"alt","Album Cover"),g(e,"class","fake svelte-1lj5pay")},m(t,n){u(t,e,n)},p(t,o){1&o&&!i(e.src,n=t[0].item.album.images[1].url)&&g(e,"src",n)},d(t){t&&f(e)}}}function st(t){let e,n,o,r;const s=[et,tt],l=[];function a(t,e){return t[0]?0:1}return n=a(t),o=l[n]=s[n](t),{c(){e=m("div"),o.c(),g(e,"class","player svelte-1lj5pay")},m(t,o){u(t,e,o),l[n].m(e,null),r=!0},p(t,[r]){let i=n;n=a(t),n===i?l[n].p(t,r):(B(),z(l[i],1,1,(()=>{l[i]=null})),R(),o=l[n],o?o.p(t,r):(o=l[n]=s[n](t),o.c()),L(o,1),o.m(e,null))},i(t){r||(L(o),r=!0)},o(t){z(o),r=!1},d(t){t&&f(e),l[n].d()}}}function lt(t,e,n){const o=localStorage.getItem("token");let r,s=0;y(a),setInterval((()=>{a()}),1e3);const l={fake:!0,progress_ms:0,item:{duration_ms:0,id:42,name:"No song playing",external_urls:{spotify:""},album:{name:"No album playing",external_urls:{spotify:""},images:[{},{url:"./Spotify_Icon_RGB_White.png"}]},artists:[{name:"No artist playing",external_urls:{spotify:""}}]}};async function a(){var t=await fetch("https://api.spotify.com/v1/me/player/currently-playing",{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});if(200!==t.status&&204!==t.status)P.set(!1),n(0,r=l);else{let e;e=204===t.status?l:await t.json(),e.item?(r?r.item.id!==e.item.id&&n(0,r=e):n(0,r=e),n(1,s=e.progress_ms)):n(0,r=l)}}return[r,s]}class at extends q{constructor(t){super(),W(this,t,lt,st,s,{})}}function it(t){let e,n;return e=new at({}),{c(){N(e.$$.fragment)},m(t,o){D(e,t,o),n=!0},i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function ct(t){let e,n;return e=new K({}),{c(){N(e.$$.fragment)},m(t,o){D(e,t,o),n=!0},i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function ut(t){let e,n,o,r;const s=[ct,it],l=[];function a(t,e){return t[0]?1:0}return n=a(t),o=l[n]=s[n](t),{c(){e=m("div"),o.c(),g(e,"class","spotify")},m(t,o){u(t,e,o),l[n].m(e,null),r=!0},p(t,[r]){let i=n;n=a(t),n!==i&&(B(),z(l[i],1,1,(()=>{l[i]=null})),R(),o=l[n],o||(o=l[n]=s[n](t),o.c()),L(o,1),o.m(e,null))},i(t){r||(L(o),r=!0)},o(t){z(o),r=!1},d(t){t&&f(e),l[n].d()}}}function ft(t,e,n){var o=new URLSearchParams(window.location.hash.replace("#","?")).get("access_token");o&&(localStorage.setItem("token",o),location.href=location.protocol+"//"+location.host+location.pathname);let r=!1;return P.subscribe((t=>{n(0,r=t)})),y((async()=>{if(localStorage.getItem("token")){let t=await fetch("https://api.spotify.com/v1/me",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});console.log(t.status),200===t.status?P.set(!0):(P.set(!1),"true"===localStorage.getItem("shouldBeLogged")&&alert("couldn't log you in, make sure you're in whitelist (app not released yet)"),localStorage.removeItem("token"))}localStorage.setItem("shouldBeLogged",!1)})),[r]}class mt extends q{constructor(t){super(),W(this,t,ft,ut,s,{})}}function pt(e){let n;return{c(){n=m("div"),n.innerHTML='<img src="./sun.svg" alt="sun" class="sun svelte-9x9wy8"/> \n    <img class="sand svelte-9x9wy8" src="./sand.svg" alt="sand"/>',g(n,"class","background svelte-9x9wy8")},m(t,e){u(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}class dt extends q{constructor(t){super(),W(this,t,null,pt,s,{})}}function gt(e){let n,o,r,s,l,a,i,p,h,$;return o=new dt({}),a=new F({}),h=new mt({}),{c(){n=m("main"),N(o.$$.fragment),r=d(),s=m("div"),l=m("div"),N(a.$$.fragment),i=d(),p=m("div"),N(h.$$.fragment),g(l,"class","clock svelte-8rces5"),g(p,"class","spotify svelte-8rces5"),g(s,"class","container svelte-8rces5"),g(n,"class","svelte-8rces5")},m(t,e){u(t,n,e),D(o,n,null),c(n,r),c(n,s),c(s,l),D(a,l,null),c(s,i),c(s,p),D(h,p,null),$=!0},p:t,i(t){$||(L(o.$$.fragment,t),L(a.$$.fragment,t),L(h.$$.fragment,t),$=!0)},o(t){z(o.$$.fragment,t),z(a.$$.fragment,t),z(h.$$.fragment,t),$=!1},d(t){t&&f(n),T(o),T(a),T(h)}}}return new class extends q{constructor(t){super(),W(this,t,null,gt,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
