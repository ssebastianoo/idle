var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let l,a;function i(t,e){return l||(l=document.createElement("a")),l.href=e,t===l.href}function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function m(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function p(){return d(" ")}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t){a=t}function y(t){(function(){if(!a)throw new Error("Function called outside component initialization");return a})().$$.on_mount.push(t)}const v=[],_=[],b=[],x=[],w=Promise.resolve();let k=!1;function M(t){b.push(t)}const I=new Set;let j=0;function S(){const t=a;do{for(;j<v.length;){const t=v[j];j++,$(t),C(t.$$)}for($(null),v.length=0,j=0;_.length;)_.pop()();for(let t=0;t<b.length;t+=1){const e=b[t];I.has(e)||(I.add(e),e())}b.length=0}while(v.length);for(;x.length;)x.pop()();k=!1,I.clear(),$(t)}function C(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const A=new Set;let E;function z(){E={r:0,c:[],p:E}}function N(){E.r||r(E.c),E=E.p}function R(t,e){t&&t.i&&(A.delete(t),t.i(e))}function T(t,e,n,r){if(t&&t.o){if(A.has(t))return;A.add(t),E.c.push((()=>{A.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function U(t){t&&t.c()}function B(t,n,s,l){const{fragment:a,on_mount:i,on_destroy:c,after_update:u}=t.$$;a&&a.m(n,s),l||M((()=>{const n=i.map(e).filter(o);c?c.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(M)}function D(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function O(t,e){-1===t.$$.dirty[0]&&(v.push(t),k||(k=!0,w.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,o,s,l,i,c,u,m=[-1]){const d=a;$(e);const p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:m,skip_bound:!1,root:o.target||d.$$.root};u&&u(p.root);let h=!1;if(p.ctx=s?s(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),h&&O(e,t)),n})):[],p.update(),h=!0,r(p.before_update),p.fragment=!!l&&l(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(f)}else p.fragment&&p.fragment.c();o.intro&&R(e.$$.fragment),B(e,o.target,o.anchor,o.customElement),S()}$(d)}class F{$destroy(){D(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function H(e){let n,r,o,s,l,a,i,$,y,v,_,b,x,w,k,M;return{c(){n=m("div"),r=m("p"),o=d(e[4]),s=d(", "),l=d(e[3]),a=p(),i=d(e[5]),$=p(),y=d(e[6]),v=p(),_=m("p"),b=d(e[2]),x=d(":"),w=d(e[1]),k=d(":"),M=d(e[0]),h(r,"class","date svelte-ua3iji"),h(_,"class","time svelte-ua3iji"),h(n,"class","clock svelte-ua3iji")},m(t,e){u(t,n,e),c(n,r),c(r,o),c(r,s),c(r,l),c(r,a),c(r,i),c(r,$),c(r,y),c(n,v),c(n,_),c(_,b),c(_,x),c(_,w),c(_,k),c(_,M)},p(t,[e]){16&e&&g(o,t[4]),8&e&&g(l,t[3]),32&e&&g(i,t[5]),64&e&&g(y,t[6]),4&e&&g(b,t[2]),2&e&&g(w,t[1]),1&e&&g(M,t[0])},i:t,o:t,d(t){t&&f(n)}}}function L(t,e,n){let r,o,s,l,a,i,c,u=new Date;return setInterval((()=>{n(7,u=new Date)}),1e3),t.$$.update=()=>{128&t.$$.dirty&&n(6,r=u.getFullYear()),128&t.$$.dirty&&n(5,o={1:"jan",2:"feb",3:"mar",4:"apr",5:"may",6:"jun",7:"jul",8:"aug",9:"sep",10:"oct",11:"nov",12:"dec"}[u.getMonth()+1]),128&t.$$.dirty&&n(4,s={0:"sun",1:"mon",2:"tue",3:"wed",4:"thu",5:"fri",6:"sat"}[u.getDay()]),128&t.$$.dirty&&n(3,l=u.getDate()),128&t.$$.dirty&&n(2,a=("0"+u.getHours()).slice(-2)),128&t.$$.dirty&&n(1,i=("0"+u.getMinutes()).slice(-2)),128&t.$$.dirty&&n(0,c=("0"+u.getSeconds()).slice(-2))},[c,i,a,l,s,o,r,u]}class P extends F{constructor(t){super(),W(this,t,L,H,s,{})}}function q(e){let n,r,o;return{c(){n=m("div"),r=m("a"),o=d("log in"),h(r,"href",e[0]),h(r,"class","svelte-196ox74"),h(n,"class","login svelte-196ox74")},m(t,e){u(t,n,e),c(n,r),c(r,o)},p(t,[e]){1&e&&h(r,"href",t[0])},i:t,o:t,d(t){t&&f(n)}}}function G(t,e,n){var r=location.protocol+"//"+location.host+location.pathname,o=function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*r));return e}(16);let s="https://accounts.spotify.com/authorize";return s+="?response_type=token",s+="&client_id="+encodeURIComponent("ad006f6397254bbd9dbe5e6bfbb35407"),s+="&scope="+encodeURIComponent("user-read-currently-playing"),s+="&redirect_uri="+encodeURIComponent(r),s+="&state="+encodeURIComponent(o),[s]}class Y extends F{constructor(t){super(),W(this,t,G,q,s,{})}}const J=[];const K=function(e,n=t){let r;const o=new Set;function l(t){if(s(e,t)&&(e=t,r)){const t=!J.length;for(const t of o)t[1](),J.push(t,e);if(t){for(let t=0;t<J.length;t+=2)J[t][0](J[t+1]);J.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(s,a=t){const i=[s,a];return o.add(i),1===o.size&&(r=n(l)||t),s(e),()=>{o.delete(i),0===o.size&&(r(),r=null)}}}}(!1);function Q(e){let n,r;return{c(){n=m("div"),r=m("div"),h(r,"class","point svelte-1nyihoe"),h(n,"class","progress svelte-1nyihoe")},m(t,o){u(t,n,o),c(n,r),e[4](r),e[5](n)},p:t,i:t,o:t,d(t){t&&f(n),e[4](null),e[5](null)}}}function V(t,e,n){let r,o,{duration:s}=e,{current:l}=e;return setInterval((()=>{const t=100*l/s,e=r.clientWidth*t/100;e<r.clientWidth&&n(1,o.style.width=`${e}px`,o)}),1e3),t.$$set=t=>{"duration"in t&&n(2,s=t.duration),"current"in t&&n(3,l=t.current)},[r,o,s,l,function(t){_[t?"unshift":"push"]((()=>{o=t,n(1,o)}))},function(t){_[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}class X extends F{constructor(t){super(),W(this,t,V,Q,s,{duration:2,current:3})}}function Z(t,e,n){const r=t.slice();return r[5]=e[n],r}function tt(e){let n;return{c(){n=d("loading...")},m(t,e){u(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}function et(t){let e,n,r,o,s,l,a,i,$,y,v,_,b,x,w,k,M,I,j,S,C,A,E,z,N,O,W=t[0].item.name+"",F=t[0].item.album.name+"",H=Math.floor(t[1]/1e3/60)+"",L=("0"+Math.floor(t[1]/1e3%60)).slice(-2)+"",P=Math.floor(t[0].item.duration_ms/1e3/60)+"",q=("0"+Math.floor(t[0].item.duration_ms/1e3%60)).slice(-2)+"",G=t[0].item.artists,Y=[];for(let e=0;e<G.length;e+=1)Y[e]=nt(Z(t,G,e));function J(t,e){return t[0].fake?ot:rt}E=new X({props:{duration:t[0].item.duration_ms,current:t[1]}});let K=J(t),Q=K(t);return{c(){e=m("div"),n=m("p"),r=m("a"),o=d(W),l=p(),a=m("p"),i=m("a"),$=d(F),v=p(),_=m("p");for(let t=0;t<Y.length;t+=1)Y[t].c();b=p(),x=m("p"),w=d(H),k=d(":"),M=d(L),I=d(" / "),j=d(P),S=d(":"),C=d(q),A=p(),U(E.$$.fragment),z=p(),N=m("div"),Q.c(),h(r,"href",s=t[0].item.external_urls.spotify),h(r,"target","_blank"),h(r,"class","svelte-14p1y32"),h(n,"class","title svelte-14p1y32"),h(i,"href",y=t[0].item.album.external_urls.spotify),h(i,"target","_blank"),h(i,"class","svelte-14p1y32"),h(a,"class","album svelte-14p1y32"),h(_,"class","artists svelte-14p1y32"),h(x,"class","time svelte-14p1y32"),h(e,"class","content svelte-14p1y32"),h(N,"class","cover svelte-14p1y32")},m(t,s){u(t,e,s),c(e,n),c(n,r),c(r,o),c(e,l),c(e,a),c(a,i),c(i,$),c(e,v),c(e,_);for(let t=0;t<Y.length;t+=1)Y[t].m(_,null);c(e,b),c(e,x),c(x,w),c(x,k),c(x,M),c(x,I),c(x,j),c(x,S),c(x,C),c(e,A),B(E,e,null),u(t,z,s),u(t,N,s),Q.m(N,null),O=!0},p(t,e){if((!O||1&e)&&W!==(W=t[0].item.name+"")&&g(o,W),(!O||1&e&&s!==(s=t[0].item.external_urls.spotify))&&h(r,"href",s),(!O||1&e)&&F!==(F=t[0].item.album.name+"")&&g($,F),(!O||1&e&&y!==(y=t[0].item.album.external_urls.spotify))&&h(i,"href",y),1&e){let n;for(G=t[0].item.artists,n=0;n<G.length;n+=1){const r=Z(t,G,n);Y[n]?Y[n].p(r,e):(Y[n]=nt(r),Y[n].c(),Y[n].m(_,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=G.length}(!O||2&e)&&H!==(H=Math.floor(t[1]/1e3/60)+"")&&g(w,H),(!O||2&e)&&L!==(L=("0"+Math.floor(t[1]/1e3%60)).slice(-2)+"")&&g(M,L),(!O||1&e)&&P!==(P=Math.floor(t[0].item.duration_ms/1e3/60)+"")&&g(j,P),(!O||1&e)&&q!==(q=("0"+Math.floor(t[0].item.duration_ms/1e3%60)).slice(-2)+"")&&g(C,q);const n={};1&e&&(n.duration=t[0].item.duration_ms),2&e&&(n.current=t[1]),E.$set(n),K===(K=J(t))&&Q?Q.p(t,e):(Q.d(1),Q=K(t),Q&&(Q.c(),Q.m(N,null)))},i(t){O||(R(E.$$.fragment,t),O=!0)},o(t){T(E.$$.fragment,t),O=!1},d(t){t&&f(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(Y,t),D(E),t&&f(z),t&&f(N),Q.d()}}}function nt(t){let e,n,r,o,s=t[5].name+"";return{c(){e=m("a"),n=d(s),r=p(),h(e,"href",o=t[5].external_urls.spotify),h(e,"target","_blank"),h(e,"class","artist svelte-14p1y32")},m(t,o){u(t,e,o),c(e,n),c(e,r)},p(t,r){1&r&&s!==(s=t[5].name+"")&&g(n,s),1&r&&o!==(o=t[5].external_urls.spotify)&&h(e,"href",o)},d(t){t&&f(e)}}}function rt(t){let e,n,r,o;return{c(){e=m("a"),n=m("img"),i(n.src,r=t[0].item.album.images[1].url)||h(n,"src",r),h(n,"alt","Album Cover"),h(n,"class","svelte-14p1y32"),h(e,"href",o=t[0].item.external_urls.spotify),h(e,"target","_blank"),h(e,"class","svelte-14p1y32")},m(t,r){u(t,e,r),c(e,n)},p(t,s){1&s&&!i(n.src,r=t[0].item.album.images[1].url)&&h(n,"src",r),1&s&&o!==(o=t[0].item.external_urls.spotify)&&h(e,"href",o)},d(t){t&&f(e)}}}function ot(t){let e,n;return{c(){e=m("img"),i(e.src,n=t[0].item.album.images[1].url)||h(e,"src",n),h(e,"alt","Album Cover"),h(e,"class","fake svelte-14p1y32")},m(t,n){u(t,e,n)},p(t,r){1&r&&!i(e.src,n=t[0].item.album.images[1].url)&&h(e,"src",n)},d(t){t&&f(e)}}}function st(t){let e,n,r,o;const s=[et,tt],l=[];function a(t,e){return t[0]?0:1}return n=a(t),r=l[n]=s[n](t),{c(){e=m("div"),r.c(),h(e,"class","player svelte-14p1y32")},m(t,r){u(t,e,r),l[n].m(e,null),o=!0},p(t,[o]){let i=n;n=a(t),n===i?l[n].p(t,o):(z(),T(l[i],1,1,(()=>{l[i]=null})),N(),r=l[n],r?r.p(t,o):(r=l[n]=s[n](t),r.c()),R(r,1),r.m(e,null))},i(t){o||(R(r),o=!0)},o(t){T(r),o=!1},d(t){t&&f(e),l[n].d()}}}function lt(t,e,n){const r=localStorage.getItem("token");let o,s=0;y(a),setInterval((()=>{a()}),1e3);const l={fake:!0,progress_ms:0,item:{duration_ms:0,id:42,name:"No song playing",external_urls:{spotify:""},album:{name:"No album playing",external_urls:{spotify:""},images:[{},{url:"./Spotify_Icon_RGB_White.png"}]},artists:[{name:"No artist playing",external_urls:{spotify:""}}]}};async function a(){var t=await fetch("https://api.spotify.com/v1/me/player/currently-playing",{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(200!==t.status&&204!==t.status)K.set(!1),n(0,o=l);else{let e;e=204===t.status?l:await t.json(),e.item?(o?o.item.id!==e.item.id&&n(0,o=e):n(0,o=e),n(1,s=e.progress_ms)):n(0,o=l)}}return[o,s]}class at extends F{constructor(t){super(),W(this,t,lt,st,s,{})}}function it(t){let e,n;return e=new at({}),{c(){U(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ct(t){let e,n;return e=new Y({}),{c(){U(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ut(t){let e,n,r,o;const s=[ct,it],l=[];function a(t,e){return t[0]?1:0}return n=a(t),r=l[n]=s[n](t),{c(){e=m("div"),r.c(),h(e,"class","spotify")},m(t,r){u(t,e,r),l[n].m(e,null),o=!0},p(t,[o]){let i=n;n=a(t),n!==i&&(z(),T(l[i],1,1,(()=>{l[i]=null})),N(),r=l[n],r||(r=l[n]=s[n](t),r.c()),R(r,1),r.m(e,null))},i(t){o||(R(r),o=!0)},o(t){T(r),o=!1},d(t){t&&f(e),l[n].d()}}}function ft(t,e,n){var r=new URLSearchParams(window.location.hash.replace("#","?")).get("access_token");r&&(localStorage.setItem("token",r),location.href=location.protocol+"//"+location.host+location.pathname);let o=!1;return K.subscribe((t=>{n(0,o=t)})),y((async()=>{if(localStorage.getItem("token")){let t=await fetch("https://api.spotify.com/v1/me",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});console.log(t.status),200===t.status?K.set(!0):(K.set(!1),alert("couldn't log you in, make sure you're in whitelist (app not released yet)"),localStorage.removeItem("token"))}})),[o]}class mt extends F{constructor(t){super(),W(this,t,ft,ut,s,{})}}function dt(e){let n;return{c(){n=m("div"),n.innerHTML='<img src="./sun.svg" alt="sun" class="sun svelte-9x9wy8"/> \n    <img class="sand svelte-9x9wy8" src="./sand.svg" alt="sand"/>',h(n,"class","background svelte-9x9wy8")},m(t,e){u(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}class pt extends F{constructor(t){super(),W(this,t,null,dt,s,{})}}function ht(e){let n,r,o,s,l,a,i,d,g,$;return r=new pt({}),a=new P({}),g=new mt({}),{c(){n=m("main"),U(r.$$.fragment),o=p(),s=m("div"),l=m("div"),U(a.$$.fragment),i=p(),d=m("div"),U(g.$$.fragment),h(l,"class","clock svelte-8rces5"),h(d,"class","spotify svelte-8rces5"),h(s,"class","container svelte-8rces5"),h(n,"class","svelte-8rces5")},m(t,e){u(t,n,e),B(r,n,null),c(n,o),c(n,s),c(s,l),B(a,l,null),c(s,i),c(s,d),B(g,d,null),$=!0},p:t,i(t){$||(R(r.$$.fragment,t),R(a.$$.fragment,t),R(g.$$.fragment,t),$=!0)},o(t){T(r.$$.fragment,t),T(a.$$.fragment,t),T(g.$$.fragment,t),$=!1},d(t){t&&f(n),D(r),D(a),D(g)}}}return new class extends F{constructor(t){super(),W(this,t,null,ht,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
